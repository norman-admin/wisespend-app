<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gastos Familiares - Junio 2025</title>
    
    <!-- CSS en orden optimizado para arquitectura modular -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="header-redesigned/css/new-header.css">
    <link rel="stylesheet" href="css/income-table-enhanced.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="mobile/css/mobile-main.css" media="(max-width: 768px)">
    <link rel="stylesheet" href="css/config-sections.css">
    <link rel="stylesheet" href="css/reportes.css">
    <link rel="stylesheet" href="css/table-filter.css">
    <link rel="stylesheet" href="css/gastos-extras-mejorados.css">
           
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <!-- Meta tags -->
    <meta name="description" content="Dashboard de control de gastos familiares">
    <meta name="theme-color" content="#3b82f6">
</head>

<body class="dashboard-body">
    <!-- Header Principal - Cargado dinÃ¡micamente -->
    <div id="header-container"></div>

    <!-- Tarjetas de Resumen - Cargadas dinÃ¡micamente -->
    <div id="stats-container"></div>

    <!-- Contenido Principal - LAYOUT 3 COLUMNAS -->
    <main class="main-content">
        <!-- MenÃº Lateral - Cargado dinÃ¡micamente -->
        <div id="sidebar-container"></div>

       <!-- Ãrea de Contenido Principal -->
        <div class="content-area" id="dynamic-content">
            <!-- El contenido se carga directamente aquÃ­ -->
        </div>
    </main>

    <!-- ðŸ“¦ SCRIPTS EN EL ORDEN CORRECTO - ARQUITECTURA MODULAR v2.1 LIMPIA -->
    
    <!-- Scripts base del sistema -->
    <script src="js/storage.js"></script>
    <script src="js/theme-manager.js"></script>
    <script src="js/currency.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/modal-system.js"></script>
    <script src="js/modal-system.js"></script>
    <script src="js/contextual-manager.js"></script>
    <script src="js/contextual-menu-actions.js"></script>
    
    <!-- Scripts de gestiÃ³n de gastos -->
    <script src="js/gastos-extras-mejorados.js"></script>             
    <script src="js/gastos.js"></script>
    <script src="js/income-table-enhanced.js"></script>
    <script src="js/ingresos.js"></script>
    
    <!-- Scripts de reportes -->
    <script src="js/reportes/reportes-generator.js"></script>
    <script src="js/reportes/reportes-manager.js"></script>
    <script src="js/reportes/reportes-charts.js"></script>
    <script src="js/reportes/reportes-html.js"></script>
    <script src="js/reportes/reportes-export.js"></script>
    
    <!-- Scripts de interfaz y componentes -->
    <script src="js/table-filter.js"></script>
    <script src="js/component-loader.js"></script>
    
    <!-- Scripts de configuraciÃ³n -->
    <script src="js/config/config-core.js"></script>
    <script src="js/config/config-currency.js"></script>
    <script src="js/config/config-ui.js"></script>
    <!-- <script src="js/config-manager.js"></script> -->
    <script src="varios/js/varios-manager.js"></script>
      
    <!-- Scripts principales -->
    <script src="js/dashboard-main.js"></script>
    <script src="js/auth.js"></script>
        
<script>
    /**
     * ðŸš€ DASHBOARD INICIALIZACIÃ“N v2.1 - LIMPIO Y SIN ERRORES
     * Control de Gastos Familiares - Arquitectura Modular Corregida
     * 
     * âœ… MEJORAS v2.1:
     * ðŸ§¹ Eliminadas referencias obsoletas a themeLoader
     * ðŸ”§ Sistema de temas simplificado (theme-manager v7.0)
     * ðŸŽ¯ Solo funciones que realmente existen
     * âš¡ Carga optimizada sin timeouts innecesarios
     * ðŸ› Sin errores de consola
     */
    
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ðŸŽ¬ Dashboard v2.1 - Arquitectura Modular LIMPIA iniciada');
        
        // âœ… VerificaciÃ³n de sistemas disponibles (sin errores)
        setTimeout(() => {
            console.log('ðŸ” Verificando sistemas cargados...');
            
            // Sistema de configuraciÃ³n modular
            if (window.configManager) {
                console.log('âš™ï¸ ConfigManager: âœ… Activo v2.0.0');
                if (window.configDebug) {
                    console.log('ðŸ› ï¸ Debug disponible: window.configDebug.testConfig()');
                }
            } else {
                console.log('âš™ï¸ ConfigManager: â³ Cargando...');
            }
            
            // Sistema de temas simplificado
            if (window.themeManager) {
                console.log('ðŸŒ™ ThemeManager: âœ… v7.0 Simplificado activo');
                console.log(`ðŸŽ¨ Tema actual: ${window.themeManager.getCurrentTheme()}`);
            } else {
                console.log('ðŸŒ™ ThemeManager: âš ï¸ No disponible');
            }
            
            // Sistema de almacenamiento
            if (window.storageManager) {
                console.log('ðŸ’¾ StorageManager: âœ… Activo');
            } else {
                console.log('ðŸ’¾ StorageManager: âš ï¸ No disponible');
            }
            
            // Sistema modal
            if (window.modalSystem) {
                console.log('ðŸªŸ ModalSystem: âœ… Activo');
            } else {
                console.log('ðŸªŸ ModalSystem: âš ï¸ No disponible');
            }
            
            // Sistema contextual
            if (window.contextualManager) {
                console.log('ðŸŽ¯ ContextualManager: âœ… Activo');
            } else {
                console.log('ðŸŽ¯ ContextualManager: âš ï¸ No disponible');
            }
            
            console.log('âœ… VerificaciÃ³n de sistemas completada');
        }, 1000);
        
        // ðŸ”§ Herramientas de debug solo en desarrollo
        if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
            // Solo funciones que realmente existen
            window.debugDashboard = {
                // Temas (sistema simplificado v7.0)
                getCurrentTheme: () => window.themeManager?.getCurrentTheme() || 'No disponible',
                switchTheme: (theme) => {
                    if (window.themeManager?.setTheme) {
                        window.themeManager.setTheme(theme);
                        return `âœ… Tema cambiado a: ${theme}`;
                    }
                    return 'âŒ ThemeManager no disponible';
                },
                getAvailableThemes: () => window.themeManager?.themes || 'No disponible',
                
                // Sistema general
                getSystemStatus: () => {
                    return {
                        themeManager: !!window.themeManager,
                        storageManager: !!window.storageManager,
                        modalSystem: !!window.modalSystem,
                        contextualManager: !!window.contextualManager,
                        configManager: !!window.configManager,
                        gastosManager: !!window.gastosManager,
                        ingresosManager: !!window.ingresosManager
                    };
                },
                
                // Utilidades
                forceReload: () => location.reload(),
                clearStorage: () => {
                    if (confirm('Â¿EstÃ¡s seguro de limpiar el localStorage?')) {
                        localStorage.clear();
                        console.log('ðŸ§¹ localStorage limpio');
                        location.reload();
                    }
                }
            };
            
            console.log('ðŸ§ª Modo desarrollo activo');
            console.log('ðŸ”§ Herramientas disponibles en: window.debugDashboard');
            console.log('ðŸ“‹ Comandos:');
            console.log('  â€¢ getCurrentTheme()');
            console.log('  â€¢ switchTheme("dark"|"light"|"pastel"|"auto")');
            console.log('  â€¢ getSystemStatus()');
            console.log('  â€¢ forceReload()');
            console.log('  â€¢ clearStorage()');
        }
    });
    
    // ðŸš¨ Error handler global para capturar errores no manejados
    window.addEventListener('error', function(e) {
        console.error('ðŸš¨ Error global capturado:', {
            message: e.message,
            filename: e.filename,
            lineno: e.lineno,
            colno: e.colno
        });
    });
    
 
    if (window.innerWidth <= 768) {
        document.write('<script src="mobile/js/mobile-menu.js"><\/script>');
    }

</script>
</body>
</html>
